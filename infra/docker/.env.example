# =============================================================================
# MLRun Environment Configuration
# Copy this file to .env and customize as needed
# =============================================================================

# -----------------------------------------------------------------------------
# Privacy & Telemetry Configuration (PRIVACY-FIRST DEFAULTS)
# -----------------------------------------------------------------------------
# MLRun is designed to be privacy-first. All data stays local by default.
# No outbound network calls are made unless explicitly enabled.

# Disable all telemetry (default: true = telemetry disabled)
MLRUN_TELEMETRY_DISABLED=true

# Disable crash reporting (default: true = crash reporting disabled)
MLRUN_CRASH_REPORTING_DISABLED=true

# Disable usage analytics (default: true = analytics disabled)
MLRUN_ANALYTICS_DISABLED=true

# Disable update checks (default: true = update checks disabled)
MLRUN_UPDATE_CHECK_DISABLED=true

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
# Bootstrap API key for initial setup (set this to a secure random value)
# Generate: openssl rand -hex 32
MLRUN_API_KEY=

# Set to "true" to disable authentication (dev mode only!)
# WARNING: Never disable auth in production
MLRUN_AUTH_DISABLED=false

# -----------------------------------------------------------------------------
# Data Retention Configuration (Planned)
# -----------------------------------------------------------------------------
# Note: these values are reserved for future retention enforcement.
# Metrics TTL in days (default: 90 days)
MLRUN_METRICS_RETENTION_DAYS=90

# Artifact TTL in days (default: 365 days, 0 = never delete)
MLRUN_ARTIFACTS_RETENTION_DAYS=365

# System logs TTL in days (default: 7 days)
MLRUN_LOGS_RETENTION_DAYS=7

# -----------------------------------------------------------------------------
# ClickHouse Configuration (Time-series metrics storage)
# -----------------------------------------------------------------------------
CLICKHOUSE_HOST=clickhouse
CLICKHOUSE_PORT=8123
CLICKHOUSE_USER=mlrun
CLICKHOUSE_PASSWORD=mlrun_dev
CLICKHOUSE_DATABASE=mlrun

# -----------------------------------------------------------------------------
# PostgreSQL Configuration (Metadata storage)
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=mlrun
POSTGRES_PASSWORD=mlrun_dev
POSTGRES_DATABASE=mlrun
DATABASE_URL=postgres://mlrun:mlrun_dev@postgres:5432/mlrun

# -----------------------------------------------------------------------------
# MinIO Configuration (Artifact storage)
# -----------------------------------------------------------------------------
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=mlrun
MINIO_SECRET_KEY=mlrun_dev_secret
MINIO_BUCKET=mlrun-artifacts
MINIO_PATH_STYLE=true
MINIO_REGION=us-east-1
MINIO_PRESIGN_EXPIRY=3600

# -----------------------------------------------------------------------------
# Redis Configuration (Caching)
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379

# -----------------------------------------------------------------------------
# API Service Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_HTTP_PORT=3001
API_GRPC_PORT=50051
RUST_LOG=info,mlrun_api=debug

# -----------------------------------------------------------------------------
# Ingest Mode Configuration
# -----------------------------------------------------------------------------
# direct: write directly to ClickHouse/Postgres (alpha mode)
# queued: use Redis/Kafka queue (future)
INGEST_MODE=direct

# -----------------------------------------------------------------------------
# UI Configuration
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:3001

# Disable Next.js telemetry (enforced by default)
NEXT_TELEMETRY_DISABLED=1

# -----------------------------------------------------------------------------
# OpenTelemetry Configuration (Optional - for self-hosted observability)
# -----------------------------------------------------------------------------
# Only used if you enable the observability profile:
#   docker compose --profile observability up
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME=mlrun
